# Шпаргалка по Git  
**Git** — это система контроля версий, которая помогает отслеживать изменения в проекте. Этот инструмент можно использовать как для индивидуальной, так и для командной работы.
# Инициализируем репозиторий
## Сделать папку репозиторием — `git init`
Чтобы Git начал отслеживать изменения в проекте, папку с файлами этого проекта нужно сделать **Git-репозиторием** (от англ. *repository* — «хранилище»). Для этого следует переместиться в неё и ввести команду `git init` (от англ. *initialize* — «инициализировать»).  
```bash  
cd ~/dev/first-project # перешли в нужную папку  
git init # создали репозиторий  
```  
В некоторых случаях при инициализации репозитория Git может показать объёмное сообщение, которое начинается со слов Using 'master' as the name…. Не пугайтесь: это не ошибка.  
Также `git init` выведет сообщение вида `Initialized empty Git repository in <ваша папка с проектом>/.git/` (англ. «инициализирован пустой Git-репозиторий в `<ваша папка>/.git/`»). В подпапке `.git` Git будет хранить всю служебную информацию.  
## «Разгитить» папку, если что-то пошло не так, — `rm -rf .git`
Если вы случайно сделали Git-репозиторием не ту папку, её можно «разгитить». Для этого нужно удалить скрытую подпапку `.git`.  
```bash  
cd <папка с репозиторием> # перешли в папку  
rm -rf .git # удалили подпапку .git  
```  
## Проверить состояние репозитория — `git status`
После инициализации репозитория `first-project` запустите команду `git status` (от англ. status — «статус», «состояние») — она показывает текущее состояние репозитория.  
# Добавляем файлы в репозиторий
## Подготовить файлы к сохранению — `git add`
Создайте файлы `todo.txt` и `readme.txt` в папке `first-project` и запустите `git status`, чтобы посмотреть, что изменилось.  
```bash  
touch todo.txt  
touch readme.txt  
# создали файлы todo.txt и readme.txt  
git status # проверили статус  
```  
Git сообщит, что в папке `first-project` есть `untracked files` (от англ. *track* — «следить», *untracked* — «неотслеженный», «неотслеживаемый») — ещё не отслеживаемые файлы `readme.txt` и `todo.txt`.  
Сейчас в `first-project` два файла. Мы хотим отслеживать состояние обоих, поэтому можем использовать команду `git add --all` (от англ. add — *«добавить»* + от англ. *all* — «всё»). Ключ, или флаг, `--all` позволяет подготовить к сохранению все файлы в репозитории.  
```bash  
git add --all # подготовили к сохранению все файлы в репозитории  
git status # проверили статус  
```  
Добавлять файлы можно и по одному, без ключа `--all`.
```bash  
git add todo.txt  
git add readme.txt  
git status  
```  
Также можно добавить текущую папку целиком — в этом случае все файлы в ней тоже будут добавлены. Обратиться к текущей папке в Bash позволяет точка (`.`).  
```bash  
git add . # добавить всю текущую папку  
git status  
```  
Если сейчас отредактировать любой из «зелёных» файлов в папке `first-project`, он перейдёт в состояние `modified` (англ. «изменённый») и будет и в «зелёном», и в «красном» списках.  
* зелёным отмечена пустая версия файла — в таком виде он был во время последнего запуска команды `git add`  
* красным отмечена версия с текстом  
Чтобы запомнить новое состояние файла, нужно снова ввести команду `git add` и передать в качестве параметра имя изменённого файла или ключ `--all`.  
# Делаем первый коммит
Коммит — это одна из основных сущностей в Git (и в других системах контроля версий). Коммит гарантирует, что изменения будут сохранены в истории и при необходимости к ним можно будет «откатиться».  
## Выполнить коммит — `git commit`
Сделать коммит можно командой `git commit` c ключом `-m` (от англ. message — «сообщение»), который присваивает коммиту сообщение. Оно пишется после ключа `-m` в кавычках.  
```bash  
git commit -m 'Мой первый коммит!'  
```  
После нажатия `Enter` текущая версия файлов будет сохранена в репозитории с сообщением `Мой первый коммит!`. Коммит (по названию команды `git commit`) — это по сути список файлов с их контентом.  
Команда `git commit` выведет информацию о коммите.
# Просматриваем историю коммитов
## Просмотреть историю коммитов — `git log`
Чтобы все коммиты, введите команду `git log` (от англ. *log* — «журнал [записей]»).
# Знакомство с GitHub
[GitHub](https://github.com/) — платформа для хранения IT-проектов и совместной работы над ними с использованием Git. По сути, это сайт, куда можно загрузить файлы своего проекта для обмена с другими людьми.  
GitHub подходит, чтобы отточить навыки работы с Git. Здесь можно завести аккаунт и вместе со своей командой работать над любыми задачами. Можно создавать проекты разных типов:   
* приватный — только для вас;
* командный — только для членов команды;
* публичный — будет виден всем.  

Также можно присоединиться к чужому open source проекту и работать над ним вместе с другими людьми со всего мира.  
## Git и платформы для удалённой работы
Git и GitHub — это два разных проекта, которые развиваются независимо друг от друга.  

Git:  
- консольный инструмент для работы с локальными и удалёнными репозиториями;
- проект с открытым исходным кодом.  

GitHub:  
- платформа для размещения удалённых репозиториев;
- принадлежит компании Microsoft.  
# Создаём удалённый репозиторий на GitHub
Для начала нужно зарегистрироваться на GitHub.  
## Инструкция по созданию репозитория на GitHub
1. Зайдите в свой профиль по ссылке `https://github.com/username`, где `username` — имя, которое вы указали при регистрации.  
2. Создайте репозиторий. Для этого перейдите на вкладку **Repositories** (англ. «репозитории»), а затем нажмите на зелёную кнопку **New** (англ. «новый») справа.  
3. Открылось окно создания нового репозитория. Назовите его `first-project`. Название удалённого репозитория необязательно должно совпадать с именем папки проекта у вас на компьютере. Но чтобы не путаться, будем называть их одинаково.  
Другие поля вам пока не понадобятся. Смело нажимайте на зелёную кнопку **Create repository** (англ. «создать репозиторий») внизу.  
Осталось связать удалённый репозиторий с локальным, который уже есть на вашем компьютере. Для этого нужно сгенерировать **SSH-ключи**.
# Что такое SSH
Когда компьютеры обмениваются данными в сети, они следуют **сетевым протоколам** (англ. network protocols) — правилам обмена данными между компьютерами.  
Один из наиболее распространённых сетевых протоколов — **SSH** (от англ. **S**ecure **S**hell Protocol). Он обеспечивает безопасный обмен данными в сети. С помощью этого протокола можно получать данные с удалённого компьютера или отправлять их на него. Трафик шифруется, поэтому протокол безопасен.  
SSH использует пару ключей для обеспечения безопасности — публичный и приватный:  
* **Приватный ключ** (англ. private key) хранится только на вашем компьютере и не должен передаваться кому-либо ещё. Он используется для расшифровки данных.  
* **Публичный ключ** (англ. public key) доступен всем и используется для шифрования данных. Они могут быть расшифрованы парным приватным ключом.  

Только вы можете расшифровать данные с помощью приватного ключа, но любой владелец публичного ключа может их для вас зашифровать. Эти два ключа связаны и образуют **SSH-пару**. В будущем вы наверняка будете использовать их для взаимодействия с GitHub и другими удалёнными серверами.
## Проверка наличия SSH-ключа
Прежде чем генерировать SSH-ключи, убедитесь, что у вас их ещё нет. По умолчанию директория с SSH-ключами находится в домашней директории пользователя. Перейдите в неё.  
```bash  
cd ~ # перешли в домашнюю директорию   
```  
Обычно SSH-ключи находятся в директории `.ssh/`. Проверить наличие этой директории и файлов в ней можно с помощью следующей команды.
```bash  
ls -la .ssh/ # вывели список созданных ключей  
```  
Если папка пустая или её нет, всё в порядке.  

Если есть файлы с похожими названиями, SSH-ключи уже создавались:  
* `id_dsa.pub`;
* `d_ecdsa.pub`;
* `id_ed25519.pub`;
* `id_rsa.pub`.  

Если вы не создавали эти файлы, удалите их все.
## Инструкция по генерации SSH-ключа
1. Для генерации SSH-пары можно использовать программу `ssh-keygen`. Откройте терминал и введите следующую команду.  
```bash  
ssh-keygen -t ed25519 -C "электронная почта, к которой привязан ваш аккаунт на GitHub"  
```  
Используйте электронную почту, к которой привязан ваш GitHub-аккаунт.  

Если вы видите сообщение об ошибке, то, скорее всего, ваша система не поддерживает алгоритм шифрования `ed25519`. Ничего страшного: используйте другой алгоритм.  
```bash  
ssh-keygen -t rsa -b 4096 -C "электронная почта, к которой привязан ваш аккаунт на GitHub"  
```  
После ввода отобразится такое сообщение.  
```bash  
> Generating public/private rsa key pair. # сгенерированы публичный и приватный ключи  
```  
2. Укажите место хранения ключей. Простой вариант — сделать домашний каталог пользователя путём по умолчанию. Для этого нажмите `Enter`.  

**macOS**  
```bash  
> Enter a file in which to save the key (/Users/you/.ssh/id_rsa): [Press enter]  
```  
**Windows**  
```bash  
> Enter a file in which to save the key (C:\Users\<имя_пользователя>\.ssh\):[Press enter]  
```  
Теперь в указанной директории появится пара ключей.  

3. Программа запросит **кодовую фразу** (англ. *passphrase*) для доступа к SSH-ключу. Вы можете оставить поле пустым. Для этого нажмите `Enter`, а затем ещё раз `Enter` для подтверждения.  
```bash  
> Enter passphrase (empty for no passphrase): [Type a passphrase]  
> Enter same passphrase again: [Type passphrase again]  
```  
4. Готово! Теперь осталось проверить, что ключи действительно сгенерировались. Для этого вызовите эту команду.  
```bash  
ls -a ~/.ssh  
```  
 На экране должны появиться два файла — один с расширением `.pub`, другой — без. Файл в `.pub` — публичный, им можно делиться с веб-сайтами или коллегами. Файл без расширения `.pub` — приватный. Ни в коем случае не передавайте его никому! 
# Привязываем SSH-ключ к GitHub
В прошлом уроке сгенерировали SSH-ключ, но он пока не привязан к аккаунту на GitHub.  
## Инструкция по связыванию SSH-ключа и GitHub-аккаунта
1. После выполнения команды `ssh-keygen` из предыдущего урока в директории `~/.ssh` будет создано два файла — `id_ed25519` и `id_ed25519.pub` (или `id_rsa` и `id_rsa.pub` — в зависимости от того, какой алгоритм вы использовали):  
  * `id_ed25519`/`id_rsa` — приватный ключ (файл без .pub в конце). Ни в коем случае не копируйте его и не делитесь им.
  * `id_ed25519.pub`/`id_rsa.pub` — публичный ключ (на это указывает расширение .pub).  
Скопируйте содержимое файла с публичным ключом в буфер обмена.  

**macOS**  
```bash  
# скопировать содержимое ключа в буфер обмена:  
pbcopy < ~/.ssh/id_rsa.pub  
# для ed25519:  
pbcopy < ~/.ssh/id_ed25519.pub  
```  
Здесь используется команда `pbcopy` — она копирует поток данных в буфер обмена. Запись `pbcopy < ~/.ssh/id_rsa.pub` означает: «Скопируй в буфер обмена всё содержимое файла `~/.ssh/id_rsa.pub»`.  

В качестве альтернативы вы можете распечатать файл на экран с помощью `cat ~/.ssh/id_rsa.pub` и скопировать его вручную.  
**Windows**  
```bash  
# скопировать содержимое ключа в буфер обмена:  
clip < ~/.ssh/id_rsa.pub  
# для ed25519:  
clip < ~/.ssh/id_ed25519.pub  
```  
Если `clip` не сработает, выведите содержимое файла с помощью `cat ~/.ssh/id_rsa.pub` или `cat ~/.ssh/id_ed25519.pub` и скопируйте вывод в буфер обмена из консоли.  
2. Перейдите на GitHub и выберите пункт **Settings** (англ. «настройки») в меню аккаунта.  
3. В меню слева нажмите на пункт **SSH and GPG keys**.  
4. В открывшейся вкладке выберите **New SSH key** (англ. «новый SSH-ключ»).  
5. В поле **Title** (англ. «заголовок») напишите название ключа. Например, **Personal key** (англ. «личный ключ»).  
6. В поле **Key type** (англ. «тип ключа») должно быть **Authentication Key** (англ. «ключ аутентификации»).  
7. В поле **Key** скопируйте ваш ключ из буфера обмена.  
8. Нажмите на кнопку **Add SSH key** (англ. «добавить SSH-ключ»).  
9. Проверьте правильность ключа с помощью следующей команды.  
```bash  
ssh -T git@github.com   
```  
Если это первый раз, когда вы используете Git, чтобы поделиться проектом на GitHub, появится похожее предупреждение.  
```bash  
The authenticity of host 'github.com (140.82.121.4)' can't be established. ED25519 key fingerprint is SHA256:+DiY3wvvV6TuJJhbpZisF/zLDA0zPMSvHdkr4UvCOqU. This key is not known by any other names. Are you sure you want to continue connecting (yes/no/[fingerprint])?  
```  
Это предупреждение сообщает, что вы никогда не соединялись с сервером GitHub. Поэтому Git не может гарантировать, что сервер является тем, за кого он себя выдаёт.  
Для подтверждения подлинности сервер генерирует и публикует ключи SHA256. Вы можете проверить ключи GitHub [по этой ссылке](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints). Если ключ в предупреждении совпадает с тем, что вы видите на сайте, значит, сервер является действительным. Введите `yes`, чтобы продолжить. Вы увидите приветствие на экране.  
```bash  
Hi %ВАШ_АККАУНТ%! You've successfully authenticated, but GitHub does not provide shell access.  
```  
Если у вас возникли сложности при генерации или привязке SSH-ключей, посмотрите [видеоинструкцию](https://code.s3.yandex.net/git_Basic/SSH_Screencast.mp4), в которой мы показываем всё по порядку.  
# Связываем локальный и удалённый репозитории  
Сейчас у вас есть локальный репозиторий `first-project`, который хранится на вашем компьютере, и удалённый репозиторий на GitHub. Вы сгенерировали SSH-ключ для безопасной работы и теперь готовы связать удалённый репозиторий с локальным.  
## Привязать удалённый репозиторий к локальному — `git remote add`
Перейдите на главную страницу удалённого репозитория, выберите в `Quick setup - if you'e done this kid of thing before` тип `SSH` и скопируйте URL. Кнопка справа позволит сделать это мгновенно.  
Откройте консоль, перейдите в каталог локального репозитория и введите команду `git remote add` (от англ. *remote* — «удалённый» и *add* — «добавить»).  
```bash  
cd ~/dev/first-project  
git remote add origin git@github.com:%ИМЯ_АККАУНТА%/first-project.git  
```  
Команде необходимо передать два параметра: имя удалённого репозитория и его URL. В качестве имени используйте слово `origin`. А URL вы скопировали со страницы удалённого репозитория.  
## Убедиться, что репозитории связаны, — `git remote -v`
Осталось убедиться, что всё работает, с помощью следующей команды.  
```bash  
git remote -v  
```  
В выводе вы должны увидеть две строчки, аналогичные этим:  
```bash  
origin    git@github.com:%ИМЯ_АККАУНТА%/%ИМЯ-ПРОЕКТА%.git (fetch)  
origin    git@github.com:%ИМЯ_АККАУНТА%/%ИМЯ-ПРОЕКТА%.git (push)  
```  
# Синхронизируем локальный и удалённый репозитории
## Основная ветка
Самая первая ветка в репозитории появляется автоматически и называется `main` (англ. «основная») или `master`. Её имя нужно указывать при отправке коммитов на удалённый репозиторий или при получении их из него.  
## Отправить изменения на удалённый репозиторий — `git push`
Вы уже прошли весь «цикл коммита»: подготовили файлы с помощью `git add`, закоммитили их с комментарием командой `git commit -m`. Осталось загрузить содержимое локального репозитория на GitHub. За это отвечает команда `git push` (от англ. push — «толкать»).  
В первый раз эту команду нужно вызвать с флагом `-u` и параметрами `origin` (имя удалённого репозитория) и `main` или `master` (название текущей ветки). Флаг `-u` свяжет локальную ветку с одноимённой удалённой. Как вы связывали локальный и удалённый репозитории в предыдущем уроке, так же и здесь нужно дополнительно связать ветки.
```bash  
$ git push -u origin main # Если команда приведёт к ошибке, попробуйте заменить main на master.  
```  
Зайдите в репозиторий `first-project` на GitHub. Вы увидите, что в репозитории появились файлы с изменениями.  
В дальнейшем при работе с удалённым репозиторием флаг `-u` можно опустить и писать просто `git push`.  
## Работа с графическим интерфейсом GitHub
GitHub предоставляет удобный интерфейс для работы с репозиторием. Например, нажмите на кнопку **commit** в правой части страницы, чтобы просмотреть все коммиты в репозитории.  
Откроется окно с коммитами и их авторами.  
Сообщение коммита в репозитории тоже является ссылкой.  
Перейдите по ссылке, кликните на текст последнего коммита над репозиторием — так вы сможете увидеть все изменения, которые были внесены в репозиторий в этом коммите.  
# Файл README.md
Чтобы другие пользователи, а также потенциальные клиенты или работодатели могли понять, что представляет собой проект, его нужно описать. Такое описание принято указывать в файле `README.md` (от англ. *read* — «прочитай» и *me* — «меня»).  
Как правило, в README.md проекта можно найти следующую информацию:  
* Название проекта и его краткое описание: кем создан, для чего, какие решает задачи и какие закрывает проблемы.
* Технологии, которые применяются в проекте. В чём его отличие от аналогичных.
* Документация проекта — подробная инструкция о том, что представляет собой проект.
* Планы проекта, если они есть.  

Вот пример файла `README.md` для Git [на GitHub](https://github.com/git/git/blob/master/README.md).
## Как создать и оформить `README.md`
README.md — текстовый файл, который можно создать командой touch, а затем редактировать так же, как и любой другой текстовый документ. Например, в блокноте.  
Преимущество `README.md` в том, что средства командной работы (такие, как GitHub) могут отображать его содержимое в браузере в виде удобной разметки. Для этого нужно не просто залить текст, но и настроить шрифт, заголовки и отступы с помощью *markdown*. **Маркда́ун** — это специальный язык разметки. Он позволяет красиво отформатировать текстовый документ.  
[Шпаргалка](https://gist.github.com/fomvasss/8dd8cd7f88c67a4e3727f9d39224a84c) по инструментам разметки.